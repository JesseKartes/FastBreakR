---
title: "Play-by-Play Analysis with FastBreakR"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Play-by-Play Analysis}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

## Introduction

This vignette demonstrates how to use FastBreakR's play-by-play (pbp) functions to generate lineups,
lineup box scores, matchup box scores, and player box scores.

## Setup

```{r setup, include=FALSE}
library(knitr)
opts_chunk$set(
  comment = '',
  collapse = TRUE,
  fig.width = 7,
  fig.height = 5,
  tidy = TRUE,
  tidy.opts = list(width.cutoff = 100),
  tidy.opts.pad = TRUE
)
```

## Load Data

```{r load-data}
library(FastBreakR)
library(dplyr, warn.conflicts = FALSE)

df <- FastBreakR::nba_scores(2025) %>%
  filter(game_id == "0022400408")

pbp <- nba_play_by_play(game_ids = unique(df$game_id))
```

## Process Lineups

```{r pbp-lineups}
pbp_processed <- pbp_lineups(pbp)
knitr::kable(head(pbp_processed), caption = 'First rows of processed pbp')
```

## Lineup Box Scores

```{r lineup-box-scores}
lineup_bs <- pbp_box_scores_lineup(pbp_processed)
knitr::kable(head(lineup_bs), caption = 'Lineup box scores')
```

## Lineup Matchup Box Scores

```{r lineup-matchup-box-scores}
matchup_bs <- FastBreakR::pbp_box_scores_lineup_matchups(pbp_processed)
knitr::kable(head(matchup_bs), caption = 'Lineup matchup box scores')
```

## Player Box Scores

```{r player-box-scores}
player_bs <- FastBreakR::pbp_box_scores_player(pbp_processed)
knitr::kable(head(player_bs), caption = 'Player box scores')
```

## Conclusion

This vignette illustrated the workflow for processing play-by-play data
and generating box scores by lineup, matchup, and player using FastBreakR.
